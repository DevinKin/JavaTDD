# 为何要关心测试驱动开发

## 为何要使用TDD

### 理解TDD

- TDD是一种简单的流程，要求你先编写测试代码，再编写实现代码。

### 红灯-绿灯-重构

- 测试驱动开发是一个过程，依赖于不断重复极短的开发周期。
- 驱动极限编程(XP)这个流程的开发周期称为“红灯-绿灯-重构”
  - 编写一个测试。
  - 运行所有测试。
  - 编写实现代码。
  - 运行所有测试。
  - 重构。
  - 运行所有测试。
- 鉴于测试时在实现前编写的，因此应该不能通过。如果通过了，说明测试是错误的。
- 编写测试时，应处于红灯状态。完成测试要求的实现后，所有测试都应通过，此时将处于绿灯状态。
- 不要试图让最后一个测试的实现完美无缺，而应只编写足以让这个测试通过的代码。
- 测试和实现的切换时间应以分钟甚至秒计算。

### TDD并非测试方法

- 测试驱动开发的主要目标是提供可测试的代码设计，测试只是一项很有用的副产品。

## 测试

- 常用的两种测试方法
  - 黑盒测试
  - 白盒测试

### 黑盒测试

- 将受测软件视为一个黑盒，无需知道其内部构造。
- 优点
  - 可高效测试大块代码块。
  - 无需访问和理解代码，也不要求测试人员知道如何编写代码。
  - 将用户和开发人员角度分离。
- 缺点
  - 覆盖率有限，因为只执行部分测试场景。
  - 测试效率低下，因为测试人员对软件内部构造一无所知。
  - 测试缺乏针对性，因为才屙屎人员对应用程序的了解有限。
- 自动化黑盒测试依赖于某种形式的自动化，如行为驱动开发(BDD)

### 白盒测试

- 白盒测试(透明盒测试)查看受测软件的内部，并将由此获得的知识用于测试过程。
- 优点
  - 可高效找出错误和问题。
  - 知道受测软件的内部构造有助于进行详细测试。
  - 能够发现隐藏的错误。
  - 可帮助程序员反省。
  - 有助于优化代码。
  - 由于知道软件的内部构造，因此可最大限度提高测试覆盖率。
- 缺点
  - 可能无法发现未实现或缺失的功能。
  - 需要对受测软件的内部构造有大致认识。
  - 需要访问代码。
  - 测试通常与产品代码的实现细节紧密耦合，导致重构代码后原本应该通过的测试未能通过。
- 白盒测试几乎都是自动化测试，且在大多情况下都是单元测试。
- 在实现前执行的白盒测试是以TDD方式编写的。

### 质量检查和质量保证的差别

- 质量检查(QC)的重点是发现缺陷。面向产品。
- 质量保证(QA)将缺陷消灭在萌芽状态。面向过程。

